# pjsekai-frida-scripts

Rewritten version: https://github.com/endergreen12/project-sekai-mod

# Disclaimer
If you use these scripts for a video, please give credit

You are not allowed to adapt the code of these scripts to other scripts or publish them as your own scripts

# Scripts
## mv-free-camera.ts

Use the left half of the screen to move, and the right half to look around

https://github.com/user-attachments/assets/a8406dd8-b1c2-4d40-a2f6-6733dd3fda58

## mv-character-camera.ts

- First Person

  ![Screenshot_2025 05 27_22 56 52 202](https://github.com/user-attachments/assets/4176f90a-ea9f-41b9-8cfa-f9e6e4211881)
  
  ![Screenshot_2025 05 27_22 57 19 618](https://github.com/user-attachments/assets/7bb2363f-a69b-4e08-96e5-aa91adbe5da0)

---

- Third Person

  ![out](https://github.com/user-attachments/assets/4b435987-d596-419e-88d2-48367a448349)

You can switch between targets by swiping the screen

Swipe left to move to the next character, and swipe right to go back to the previous character

### Options
Some options for free camera and character camera are provided

You can change those from the option dialog

A button to open the option dialog will be added to the MV select screen

![Screenshot_20250708-220128](https://github.com/user-attachments/assets/f8bfc461-797e-4ea4-9b35-7d94060bc0d4)

Here are the explanation(s) for the options:

- Remove MeshOff tracks
  
  In some MV, characters may become disappeared due to staging

  This option prevents it

## dumper.ts
Dump MasterData and wordings, dumped data will be saved to "/sdcard/Android/data/com.sega.pjsekai/files/dumped"

A button to start dumping will be added to the option dialog

![image](https://github.com/user-attachments/assets/b95c522b-9ebe-4761-8f73-721c9b37bafa)

By default, the script will dump MasterMusicAlls, MasterEventStories, MasterSpecialStoryMap and MasterUnitStoryEpisodeAll

You can easily change the dump targets by changing targetDataNameArray in the script

![image](https://github.com/user-attachments/assets/28fef10a-9dcd-4ba5-898b-5cf98fd9784c)

## logger.ts
Trace Unity log functions

## misc/
There are some scripts in the folder:
### Custom Live (custom-live.ts)

  Start live with custom settings

  You can see MasterMusicAlls.json generated by dumper.ts to check music ids

  https://github.com/user-attachments/assets/0a59201a-459a-4804-a70d-13bd91df3584

### Play scenario (play-scenario.ts, play-special-scenario.ts)

  Play any scenario you want to see

  https://github.com/user-attachments/assets/c9e95fcb-0467-4ca3-bd28-6a96bbe6a650

### Make all notes flick and critical (make-all-notes-flick-and-critical.ts)

  https://github.com/user-attachments/assets/966f707d-e724-4e58-a992-54a559b4f2ca

### Automatically retires at the end of the live to prevent sending abnormal data to the server (auto-retire.ts)

  ![out](https://github.com/user-attachments/assets/712aa0b6-f172-4413-b464-b5ae287e0d6b)

# How to use
## Requirements
- Node.js
- Frida
- Basic knowledge of how to use frida

---

1. Clone this repo, and install specific version of frida with requirements.txt (You might want to install Frida in the virtual environment):
```
pip install -r requirements.txt
```
2. Install dependencies with this command:
```
npm install
```
3. After finished, you can get started with this command:
```
frida -U -N com.sega.pjsekai -l the_script_you_want_to_use.ts
```
In the emulator, the above command must be coupled with `--realm=emulated`

---

# Notes
I have not tested these scripts in the English version, but they will probably work
